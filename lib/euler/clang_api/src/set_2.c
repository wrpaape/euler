/************************************************************************************
 *                                     set_2.c                                      *
 *                                                                                  *
 * Module housing solutions to problems 11-20                                       *
 ************************************************************************************/
/************************************************************************************
 *                             PREPROCESSOR DIRECTIVES                              *
 ************************************************************************************/
#include "sets.h"
#include "set_2.h"
/************************************************************************************
 *                               TOP LEVEL FUNCTIONS                                *
 ************************************************************************************/
/************************************************************************************
 *                                  - problem_12 -                                  *
 * 																																									*
 * The sequence of triangle numbers is generated by adding the natural numbers. So	*
 * the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten		*
 * terms would be:																																	*
 * 																																									*
 * 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...																					*
 * 																																									*
 * Let us list the factors of the first seven triangle numbers:											*
 * 																																									*
 *  1: 1																																						*
 *  3: 1,3																																					*
 *  6: 1,2,3,6																																			*
 * 10: 1,2,5,10																																			*
 * 15: 1,3,5,15																																			*
 * 21: 1,3,7,21																																			*
 * 28: 1,2,4,7,14,28																																*
 * We can see that 28 is the first triangle number to have over five divisors.			*
 * 																																									*
 * What is the value of the first triangle number to have over five hundred					*
 * divisors? 																																				*
 ************************************************************************************/
void problem_12(void)
{
	const unsigned int N = 10; /* max number of iterations */

	unsigned int n;						 /* counter for calculating triangule number 'tri' */
	unsigned int tri;					 /* triangle number corresponding to counter 'n' */
	unsigned int num_divs;		 /* number of divisors for 'tri' */
	unsigned int max_divs;     /* current max number of divisors */
	unsigned int max_divs_tri; /* triangle number corresponding to 'max_divs' */
	unsigned int smaller_div;  /* smaller of two divisors whose product is 'tri' */
	unsigned int min_big_div;  /* current smallest larger divisor */

  n   = 0;
  tri = 0;

  while (max_divs < 500) {
		/* tri = n * (n + 1) / 2; /1* calculate next triangle number *1/ */
    tri = tri + n;         /* calculate next triangle number */
		num_divs = 2;          /* corresponds to 1 and 'tri' */
    smaller_div = 1;
		min_big_div = tri;

    while (smaller_div <= min_big_div) {
      ++smaller_div;

      if (tri % smaller_div == 0) {
        min_big_div = tri / smaller_div;
        num_divs += 2;
      }
    }

    if (num_divs > max_divs) {
      max_divs = num_divs;
      max_divs_tri = tri;
    }

    ++n;
	}

	printf("%u: %u divisors", max_divs_tri, max_divs);
}
